<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Big D's Tree Service Janesville WI | Tree Removal, Pruning & Storm Cleanup</title>
    <meta name="description"
        content="Safe, efficient tree service near me in Janesville, WI. Precision removal, pruning, and emergency response for Rock County homes. Every cut counts‚Äîget started today.">

    <!-- Preload Critical Image (Assuming Winter for now due to date) -->
    <link rel="preload" as="image" href="assets/images/hero-winter.png" fetchpriority="high">

    <!-- Fonts -->
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;600&family=Outfit:wght@600;700&display=swap"
        rel="stylesheet">

    <!-- Styles -->
    <link rel="stylesheet" href="styles.css">

    <!-- Schema -->
    <script type="application/ld+json">
    {
      "@context": "https://schema.org",
      "@type": "TreeService",
      "name": "Big D's Tree Service",
      "founder": "Corey Dean",
      "address": {
        "@type": "PostalAddress",
        "streetAddress": "Janesville Area",
        "addressLocality": "Janesville",
        "addressRegion": "WI",
        "postalCode": "53545",
        "addressCountry": "US"
      },
      "telephone": "(262) 215-0497",
      "email": "shipithon@gmail.com",
      "priceRange": "$$",
      "geo": {
        "@type": "GeoCoordinates",
        "latitude": 42.6828,
        "longitude": -89.0187
      },
      "areaServed": ["Janesville", "Rock County", "Walworth", "Jefferson", "Dane", "Racine"],
      "sameAs": [
        "https://www.facebook.com/BigDsTreeService"
      ]
    }
    </script>
</head>

<body>

    <!-- Hero Header Bar -->
    <header class="site-hero-bar" style="position:sticky; top:0; z-index:50; background:linear-gradient(135deg,#0f2f57,#1a4b84); color:#fff; padding:.75rem 1rem; display:flex; justify-content:space-between; align-items:center; box-shadow:0 6px 18px rgba(0,0,0,.22)">
        <strong>Big D‚Äôs Tree Service</strong>
        <nav style="display:flex; gap:.75rem; align-items:center; font-size:.95rem;">
            <a href="#hero" style="color:#fff; text-decoration:none;">Home</a>
            <a href="#quick-quote" style="color:#fff; text-decoration:none;">Quick Quote</a>
            <a href="tel:2622150497" style="color:#fff; text-decoration:none; font-weight:700;">(262) 215-0497</a>
        </nav>
    </header>

    <!-- Hero Section -->
    <header class="hero" id="hero">
        <!-- Background Layer -->
        <div class="hero-bg">
            <img src="assets/images/hero-spring.png" alt="Big D's Tree Service Janesville - Historic home in Spring"
                class="hero-img spring" loading="lazy">
            <img src="assets/images/hero-summer.png" alt="Big D's Tree Service Janesville - Historic home in Summer"
                class="hero-img summer" loading="lazy">
            <img src="assets/images/hero-fall.png" alt="Big D's Tree Service Janesville - Historic home in Fall"
                class="hero-img fall" loading="lazy">
            <img src="assets/images/hero-winter.png" alt="Big D's Tree Service Janesville - Historic home in Winter"
                class="hero-img winter active" fetchpriority="high">
            <img src="assets/images/hero-night.png" alt="Big D's Tree Service Janesville - Historic home at Night"
                class="hero-img night" loading="lazy">
        </div>

        <!-- Overlay -->
        <div class="hero-content">
            <h1 class="hero-title">Your Home. Protected.</h1>
            <p class="hero-sub">Through every season. Every cut counts.</p>

            <form class="hero-form" onsubmit="event.preventDefault(); handleHeroSubmit();">
                <div class="input-group">
                    <input type="text" id="concernInput"
                        placeholder="Type Tree, Stump or Branches"
                        aria-label="Describe your tree concern" required>
                    <button type="submit" class="btn-primary">Get Started</button>
                </div>
            </form>
        </div>

        <!-- Chat Modal (Hidden initially) -->
        <div class="hero-response" id="heroResponse">
            <div class="response-wrapper chat-wrapper">
                <div class="chat-container">
                    <div class="chat-header">
                        <div class="chat-title">
                            <span class="chat-icon">üå≥</span>
                            <span>Big D's Smart Desk</span>
                        </div>
                        <button class="close-modal" aria-label="Close" onclick="closeChat()">&times;</button>
                    </div>

                    <!-- Chat Messages Area -->
                    <div class="chat-messages" id="chatMessages">
                        <!-- Messages will be injected here -->
                    </div>

                    <!-- Photo Upload Section (hidden until ready) -->
                    <div class="photo-section hidden" id="photoSection">
                        <div class="photo-tips">
                            <span class="tip">üìç Full tree</span>
                            <span class="tip">üå≥ Base/trunk</span>
                            <span class="tip">‚ö° Power lines</span>
                        </div>
                        <div class="photo-upload-area" id="drop-zone">
                            <div class="upload-icon">üì∑</div>
                            <p>Tap to add photos</p>
                            <input type="file" id="photo-input" multiple accept="image/*" hidden>
                            <div class="preview-grid" id="photo-previews"></div>
                        </div>
                        <button class="btn-primary" onclick="submitWithPhotos()">Submit Request</button>
                    </div>

                    <!-- Result Section (hidden until complete) -->
                    <div class="result-section hidden" id="resultSection">
                        <div id="result-content"></div>
                        <button class="btn-primary" onclick="closeChat()">Done</button>
                    </div>

                    <!-- Chat Input -->
                    <div class="chat-input-area" id="chatInputArea">
                        <input type="text" id="chatInput" placeholder="Type your response..."
                            onkeypress="if(event.key==='Enter')sendUserMessage()">
                        <button class="send-btn" onclick="sendUserMessage()">
                            <span>Send</span>
                        </button>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <!-- Settings Button (Footer) -->


    <!-- Settings Modal -->


    <!-- Main Content -->
    <main>
        <!-- Dream Realized -->
        <section class="section dream" id="dream">
            <div class="container fade-in">
                <h2 class="section-title">The Dream Realized</h2>
                <p class="poetic-text">See your home transformed. Trees that shelter, not shadow. Family moments under
                    safe canopies. Legacy preserved.</p>
            </div>
        </section>

        <!-- Services -->
        <section class="section services">
            <div class="container grid-3">
                <div class="service-card fade-in delay-1">
                    <h3>Health</h3>
                    <p>Pruning for longevity. Trees grow stronger, healthier.</p>
                </div>
                <div class="service-card fade-in delay-2">
                    <h3>Safety</h3>
                    <p>Removal and storm response. Hazards gone, peace restored.</p>
                </div>
                <div class="service-card fade-in delay-3">
                    <h3>Beauty</h3>
                    <p>Shaping and cleanup. Your landscape alive, inviting.</p>
                </div>
            </div>
        </section>

        <!-- Trust -->
        <section class="section trust">
            <div class="container center-text fade-in">
                <blockquote class="testimonial">"Fast storm response‚Äîsaved our yard!" <span class="stars">‚òÖ‚òÖ‚òÖ‚òÖ‚òÖ</span>
                </blockquote>
                <p class="trust-badge">Fully Insured & Family Owned</p>
                <p>We've guarded Janesville homes for years. Every cut precise.</p>
            </div>
        </section>

        <!-- About -->
        <section class="section about">
            <div class="container fade-in">
                <h2>About Us</h2>
                <p>Big D's Tree Service. Family-owned in Janesville. Corey Dean leads with local roots and precision.
                    Our tree-for-tree commitment: Plant one for every removal. Every cut counts‚Äîfor you, for Wisconsin.
                </p>
            </div>
        </section>

        <!-- Gallery -->
        <section class="section gallery">
            <div class="container grid-gallery">
                <!-- Placeholders for gallery - in real usage these would be file paths -->
                <div class="gallery-item"></div>
                <div class="gallery-item"></div>
                <div class="gallery-item"></div>
                <div class="gallery-item"></div>
            </div>
        </section>

        <!-- Close / CTA -->
        <section class="section close">
            <div class="container center-text">
                <h2>Ready to protect what matters?</h2>
                <a href="tel:2622150497" class="btn-large">Call (262) 215-0497</a>
            </div>
        </section>

        <!-- Old-School Quick Quote Form -->
        <section class="section" id="quick-quote">
            <div class="container" style="max-width:760px;">
                <h2 style="margin-bottom:.5rem;">Quick Quote Request</h2>
                <p style="margin-bottom:1rem; opacity:.9;">Simple form. Add photos. We email the owner directly.</p>
                <form id="quickQuoteForm" style="display:grid; gap:.75rem; background:#fff; padding:1rem; border-radius:12px; box-shadow:0 8px 24px rgba(0,0,0,.1);">
                    <input name="name" required placeholder="Name" style="padding:.75rem; border:1px solid #cbd5e1; border-radius:8px;">
                    <input name="phone" required placeholder="Phone Number" style="padding:.75rem; border:1px solid #cbd5e1; border-radius:8px;">
                    <input type="email" name="email" placeholder="Email" style="padding:.75rem; border:1px solid #cbd5e1; border-radius:8px;">
                    <input name="address" placeholder="Address" style="padding:.75rem; border:1px solid #cbd5e1; border-radius:8px;">
                    <textarea name="details" required placeholder="What are your tree care and preservation needs?" style="min-height:120px; padding:.75rem; border:1px solid #cbd5e1; border-radius:8px;"></textarea>
                    <input type="file" name="photos" id="quickQuotePhotos" multiple accept="image/*">
                    <button type="submit" class="btn-primary" id="quickQuoteBtn">Send Request</button>
                    <small id="quickQuoteMsg" style="opacity:.85;"></small>
                </form>
            </div>
        </section>
    </main>

    <footer class="footer">
        <div class="container">
            <p class="nap">Big D's Tree Service, Janesville, WI 53545 | (262) 215-0497 | shipithon@gmail.com</p>
            <p class="areas">Serving Janesville, Rock County, Walworth, Jefferson, Dane, Racine</p>
        </div>
    </footer>

    <script src="env.js"></script>
    <script>
      (function(){
        const form = document.getElementById('quickQuoteForm');
        if(!form) return;
        const btn = document.getElementById('quickQuoteBtn');
        const msg = document.getElementById('quickQuoteMsg');
        form.addEventListener('submit', async (e) => {
          e.preventDefault();
          btn.disabled = true;
          msg.textContent = 'Sending...';
          const fd = new FormData(form);
          try {
            const API_BASE = (window.ENV && window.ENV.API_BASE) || 'http://localhost:3001';
            const res = await fetch(`${API_BASE}/api/quote`, { method:'POST', body: fd });
            if(!res.ok) throw new Error('Request failed');
            form.reset();
            msg.textContent = '‚úÖ Request sent. We will reach out shortly.';
          } catch (err) {
            msg.textContent = '‚ùå Could not send. Please call (262) 215-0497.';
          } finally {
            btn.disabled = false;
          }
        });
      })();
    </script>
    <script type="module" src="frontend/script.js"></script>
</body>

</html>